{% extends 'inventory/base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<h1 class="mb-4">Inventory Dashboard</h1>

{% if forecasted_out_products %}
<div class="alert alert-warning">
    <strong>Inventory Forecast:</strong>
    <ul class="mb-0">
        {% for item in forecasted_out_products %}
            <li>
                {{ item.product.name }}: Projected to run out in <strong>{{ item.days_left }}</strong> days (Avg daily sales: {{ item.avg_daily_sales }})
            </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% if low_stock %}
<div class="alert alert-danger">
    <strong>Low Stock Alerts:</strong>
    <ul class="mb-0">
        {% for product in low_stock %}
            <li>{{ product.name }} ({{ product.quantity }} left)</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<div class="alert alert-success">All products sufficiently stocked.</div>
{% endif %}

{% if notifications %}
<div class="alert alert-info">
    <ul class="mb-0">
        {% for note in notifications %}
            <li>{{ note }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<h3>Recent Sales</h3>
<ul class="list-group mb-4">
    {% for sale in sales %}
        <li class="list-group-item">{{ sale.product.name }} - {{ sale.quantity }} on {{ sale.sale_date|date:"Y-m-d H:i" }}</li>
    {% empty %}
        <li class="list-group-item">No sales yet.</li>
    {% endfor %}
</ul>
{% endblock %}